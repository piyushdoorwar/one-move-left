:root{
  --bg:#2C001E;
  --panel:#3D1B2B;
  --panel2:#2A0F1F;
  --text:#FFFFFF;
  --muted:#B0B0B0;

  --accent:#E95420;
  --secondary:#77216F;
  --tertiary:#5E2750;

  --accent-rgb:233,84,32;
  --secondary-rgb:119,33,111;
  --panel-rgb:61,27,43;
  --panel2-rgb:42,15,31;

  --body-bg: 
    radial-gradient(1200px 700px at 15% -10%, rgba(233,84,32,.18), transparent 60%),
    radial-gradient(900px 600px at 110% 20%, rgba(119,33,111,.16), transparent 60%),
    radial-gradient(900px 600px at 50% 120%, rgba(94,39,80,.12), transparent 60%),
    linear-gradient(180deg, #2C001E, #1A0012),
    var(--bg);

  --gap: 8px;
  --radius: 16px;
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: 'Ubuntu', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:var(--text);
  background: var(--body-bg);
  display:flex;
  justify-content:center;
  padding:16px;
}

.app{width:min(96vw,720px)}

header{
  display:flex; gap:24px; align-items:center; justify-content:space-between;
  padding: 32px;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 0 0 var(--radius) var(--radius);
  margin-bottom: 32px;
}

.brand .title{
  font-weight:900;
  letter-spacing:1.6px;
  font-size:28px;
  background:linear-gradient(135deg,var(--accent),var(--secondary));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
  text-shadow:0 0 18px rgba(var(--accent-rgb),.12);
  margin: 0;
}
.brand .sub{color:var(--muted); font-size:14px; margin: 8px 0 0 0; opacity: 0.8}

.stats{display:flex; gap:24px; flex-wrap:wrap; justify-content:flex-end}
.pill{
  min-width:120px;
  padding:16px 20px;
  border-radius:16px;
  background:linear-gradient(135deg, rgba(0,0,0,.08), rgba(0,0,0,.04));
  border:1px solid rgba(var(--accent-rgb),.2);
  box-shadow:0 4px 20px rgba(0,0,0,.1);
  text-align:center;
  backdrop-filter: blur(10px);
}
.label{font-size:12px; color:var(--muted)}
.value{font-weight:900; font-size:18px}

.toolbar{display:flex; gap:16px; margin:24px 0 16px; flex-wrap:wrap; justify-content: center}
.btn{
  border-radius:12px;
  padding:10px 14px;
  border:1px solid rgba(var(--accent-rgb),.18);
  background:linear-gradient(180deg, rgba(0,0,0,.08), rgba(0,0,0,.03));
  color:var(--text);
  font-weight:800;
  cursor:pointer;
  user-select:none;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.btn:active{transform:translateY(1px)}
.btn.primary{
  border-color:rgba(var(--accent-rgb),.28);
  background:linear-gradient(180deg, rgba(var(--accent-rgb),.22), rgba(var(--secondary-rgb),.10));
}
.btn.ghost{
  background:transparent;
  border:1px dashed rgba(var(--secondary-rgb),.28);
}

.bannerSlot{height:44px; display:flex; align-items:center}
.banner{
  width:100%;
  opacity:0;
  transform:translateY(-6px);
  transition:opacity .18s ease, transform .18s ease;
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.08);
  background:rgba(0,0,0,.04);
  color:var(--muted);
}
.banner.show{opacity:1; transform:translateY(0)}
.banner.good{color:#031a12; background:rgba(39,255,155,.18); border-color:rgba(39,255,155,.28)}
.banner.bad{color:#24040e; background:rgba(255,59,107,.18); border-color:rgba(255,59,107,.32)}
.banner.move{color:#fff; background:rgba(0,0,0,.2); border-color:rgba(0,0,0,.4); text-shadow:0 0 8px #000, 0 0 16px #000, 0 0 24px #000; font-weight:900}

.layout{
  display:grid;
  grid-template-columns: 240px 1fr;
  gap:12px;
  align-items:start;
}

.missionCard{
  border-radius:18px;
  padding:14px;
  background:linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.02));
  border:1px solid rgba(var(--secondary-rgb),.18);
  box-shadow:0 0 0 1px rgba(var(--accent-rgb),.10) inset, var(--shadow);
}

.mTop{display:flex; justify-content:space-between; align-items:baseline; margin-bottom:10px}
.mTitle{font-weight:950; letter-spacing:.5px}
.mLevel{color:var(--muted); font-size:12px}

.mRow{display:flex; justify-content:space-between; align-items:center; padding:10px 0; border-bottom:1px solid rgba(255,255,255,.06)}
.mRow:last-of-type{border-bottom:none}
.mLabel{color:var(--muted); font-size:12px}
.mValue{font-weight:900; font-size:12px}
.neon{
  background:linear-gradient(90deg,var(--accent),var(--secondary),var(--tertiary));
  -webkit-background-clip:text;
  background-clip:text;
  color:transparent;
}

.mHint{
  margin-top:10px;
  color:rgba(255,255,255,.72);
  font-size:12px;
  line-height:1.45;
}

.boardWrap{position:relative}

.board{
  position:relative;
  width:100%;
  max-width: 500px;
  aspect-ratio:1/1;
  background:linear-gradient(135deg, rgba(0,0,0,.08), rgba(0,0,0,.04));
  border:2px solid rgba(var(--accent-rgb),.2);
  border-radius:24px;
  padding:16px;
  box-shadow:
    0 8px 32px rgba(0,0,0,.12),
    0 0 0 1px rgba(var(--accent-rgb),.1) inset;
  touch-action:none;
  overflow:hidden;
  backdrop-filter: blur(20px);
}

/* grid background */
.grid{
  position:absolute;
  inset:var(--gap);
  display:grid;
  grid-template-columns:repeat(var(--size), 1fr);
  grid-template-rows:repeat(var(--size), 1fr);
  gap:var(--gap);
}

.spinner{
  width:34px;
  height:34px;
  border-radius:999px;
  border:3px solid rgba(255,255,255,.12);
  border-top-color: rgba(var(--accent-rgb),.75);
  border-right-color: rgba(var(--secondary-rgb),.55);
  animation: spin .8s linear infinite;
  margin: 6px auto 14px;
}
@keyframes spin { to { transform: rotate(360deg); } }


.cell{
  border-radius:14px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
}

/* orbs positioned absolutely for smooth moves */
.orb{
  position:absolute;
  left:0; top:0;
  border-radius:16px;
  width:0; height:0; /* set by JS */
  display:flex; align-items:center; justify-content:center;
  font-weight:950;
  transform:translate(0,0);
  transition:transform .18s cubic-bezier(.2,.8,.2,1);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.12) inset,
    0 18px 36px rgba(0,0,0,.45);
  will-change:transform;
  user-select:none;
}
.orb::before{
  content:"";
  position:absolute; inset:-40%;
  background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.38), transparent 55%);
  opacity:.55;
  transform:rotate(12deg);
}
.orb .sym{
  position:relative;
  z-index:1;
  font-size:22px;
  color:rgba(0,0,0,.55);
  text-shadow:0 8px 22px rgba(0,0,0,.25);
}

/* neon colors */
.orb[data-c="0"]{background:linear-gradient(180deg, rgba(0,229,255,.95), rgba(0,229,255,.55));}
.orb[data-c="1"]{background:linear-gradient(180deg, rgba(183,0,255,.95), rgba(183,0,255,.55));}
.orb[data-c="2"]{background:linear-gradient(180deg, rgba(39,255,155,.95), rgba(39,255,155,.55));}
.orb[data-c="3"]{background:linear-gradient(180deg, rgba(255,209,102,.95), rgba(255,209,102,.55));}
.orb[data-c="4"]{background:linear-gradient(180deg, rgba(255,59,107,.95), rgba(255,59,107,.55));}

.orb.pop{animation:pop .16s ease-out;}
@keyframes pop{0%{transform:scale(.85)} 55%{transform:scale(1.08)} 100%{transform:scale(1)}}

.orb.blast{animation:blast .5s ease-out forwards;}

.float-score{
  position:absolute;
  color:#fff;
  font-weight:900;
  font-size:18px;
  text-shadow:0 0 4px #000;
  pointer-events:none;
  z-index:20;
}
.float-score.animate{animation:floatUp 1s ease-out forwards;}

@keyframes floatUp{
  0%{opacity:1; transform:translateY(0) scale(1);}
  100%{opacity:0; transform:translateY(-40px) scale(1.2);}
}

@keyframes glow{
  0%{filter:brightness(1) drop-shadow(0 0 0 rgba(255,255,255,0))}
  50%{filter:brightness(1.5) drop-shadow(0 0 8px rgba(255,255,255,0.8))}
  100%{filter:brightness(1) drop-shadow(0 0 0 rgba(255,255,255,0))}
}
@keyframes blast{
  0%{opacity:1; transform:scale(1)}
  50%{transform:scale(0.8)}
  100%{opacity:0; transform:scale(0.3)}
}

.overlay{
  position:absolute; inset:0;
  display:none;
  align-items:center; justify-content:center;
  background:rgba(0,0,0,.55);
  backdrop-filter: blur(8px);
  border-radius:var(--radius);
  z-index:20;
}
.overlay.show{display:flex}
.card{
  width:min(92vw,440px);
  background:linear-gradient(180deg, rgba(var(--panel-rgb),.92), rgba(var(--panel2-rgb),.92));
  border:1px solid rgba(var(--accent-rgb),.18);
  border-radius:18px;
  padding:16px;
  box-shadow:var(--shadow);
}
.card h3{margin:0 0 10px}
.body{color:var(--muted); line-height:1.55}
.row{display:flex; gap:10px; justify-content:flex-end; margin-top:14px}

footer{margin-top:32px; color:var(--muted); font-size:14px; text-align:center; opacity: 0.7}

/* responsive: stack mission on top for narrow screens */
@media (max-width: 720px){
  .layout{grid-template-columns:1fr}

  header{
    flex-direction: column;
    align-items: center;
    text-align: center;
    gap: 8px;
  }

  .stats{
    justify-content: center;
    margin-top: 8px;
  }

  .toolbar{
    justify-content: center;
  }

  .brand .title{
    font-size: 18px;
  }

  .missionCard{
    margin-bottom: 12px;
  }
}

/* extra small screens */
@media (max-width: 480px){
  .pill{
    min-width: 80px;
    padding: 8px 10px;
  }

  .brand .title{
    font-size: 16px;
  }

  .toolbar{
    gap: 6px;
  }

  .btn{
    padding: 8px 12px;
    font-size: 14px;
  }
}
